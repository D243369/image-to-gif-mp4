<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Image Tool（GIF / MP4）</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <main class="wrap">
    <header class="card header">
      <h1 class="title">画像 → GIF / MP4 変換</h1>
      <p class="desc">
        画像の処理はすべてブラウザ内で完結します。画像はアップロードされません（外部送信なし）。
      </p>

      <div class="tabs" role="tablist" aria-label="出力形式">
        <button id="btnGif" class="tab active" role="tab" aria-selected="true">GIF</button>
        <button id="btnMp4" class="tab" role="tab" aria-selected="false">MP4</button>
      </div>
    </header>

    <section class="card">
      <div id="dropzone" class="dropzone" tabindex="0" aria-label="画像アップロード">
        <div class="dz-inner">
          <div class="dz-icon">⬆</div>
          <div class="dz-title">画像をドラッグ＆ドロップ</div>
          <div class="dz-sub">またはクリックして選択（JPG / PNG / WebP）</div>
        </div>
        <input id="fileInput" class="file" type="file" accept="image/*" />
      </div>

      <div class="grid">
        <div>
          <h2 class="h2">プレビュー</h2>
          <div class="preview">
            <img id="previewImg" alt="preview" />
            <div id="previewEmpty" class="preview-empty">画像が未選択です</div>
          </div>
        </div>

        <aside>
  <h2 class="h2">設定</h2>

  <div id="panelGif" class="panel">
    <p class="note">GIFは静止画風（2フレーム）で生成します。<br>GIFは仕様上256色制限があり、写真やグラデーションでは劣化する場合があります。</p>
  </div>

  <div id="panelMp4" class="panel" hidden>
    <div class="row">
      <label>再生時間（秒）</label>
      <input id="mp4Seconds" type="number" min="3" max="30" value="3" />
    </div>
    <div class="row">
      <label>ビットレート（目安）</label>
      <input id="mp4Quality" type="range" min="40" max="100" value="90" />
      <span id="mp4QualityVal">90%</span>
    </div>
  </div>

  <div class="actions">
    <button id="btnConvert" class="primary" disabled>Gifを生成</button>
    <button id="btnDownload" class="primary download" hidden>ダウンロード</button>
    <button id="btnReset" class="ghost">リセット</button>
  </div>

  <p id="status" class="note" style="margin-top:10px;">画像を選択してください</p>
  <p class="note">選択されたファイル： <span id="fileName">（未選択）</span></p>
</aside>
      </div>
    </section>

    <footer class="footer">
  <div class="panel" style="text-align:left; max-width:980px; margin:0 auto;">
    <p class="h2" style="margin-top:0;">このツールの動作について</p>
    <p class="note">
      画像の読み込み・変換・書き出しは、すべてお使いのブラウザ内で行われます。サーバーへ画像を送信する処理はありません。
      また、本ツールは形式変換のみを行い、AIによる加工・生成は使用していません。
    </p>
    <p class="note">
      ただし、ブラウザや端末の環境によって挙動が変わる場合があります。気になる方は無理に使用せず、自己責任の範囲でご利用ください。
    </p>

    <p class="h2" style="margin-top:12px;">著作権・利用上の注意</p>
    <ul class="note" style="margin:0; padding-left:18px;">
      <li>アップロード（選択）した画像の権利は、画像の権利者に帰属します</li>
      <li>本ツールで生成されたGIF/MP4についても、元画像の権利者に帰属します</li>
      <li>本ツールは変換処理のみで、権利の取得・移転・放棄を行いません</li>
      <li>第三者の権利を侵害する画像の利用は禁止です</li>
      <li>利用する画像について、適切な権利・許諾があることを確認してください</li>
    </ul>
  </div>
</footer>
  </main>

  <!-- GIFエンコーダ（先に読む） -->
  <script src="./libs/gifjs/gif.js"></script>
  <!-- MP4 muxer (WebCodecs → MP4) -->
  <script src="./libs/mp4-muxer/mp4-muxer.js"></script>
  <!-- メイン処理 -->
  <script src="./app.js" defer></script>
</body>
</html>
